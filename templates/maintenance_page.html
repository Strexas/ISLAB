<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <title>Maintenance Details - Toyota Corolla</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: radial-gradient(circle at top left, #2563eb, #9333ea);
      color: #fff;
      margin: 0;
      padding: 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    h1 {
      font-size: 2.6em;
      text-align: center;
      margin-bottom: 8px;
    }

    .subtitle {
      opacity: 0.85;
      margin-bottom: 30px;
      text-align: center;
      font-size: 1.1em;
    }

    .btn {
      background: rgba(255,255,255,0.2);
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn:hover { background: rgba(255,255,255,0.4); transform: translateY(-2px); }
    .btn.delete { background: rgba(255,50,50,0.3); }
    .btn.delete:hover { background: rgba(255,50,50,0.6); }
    .btn.parts { background: rgba(34,197,94,0.3); }
    .btn.parts:hover { background: rgba(34,197,94,0.5); }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 25px;
    }

    .details-container {
      background: rgba(255,255,255,0.12);
      padding: 35px 45px;
      border-radius: 14px;
      width: 100%;
      max-width: 900px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      backdrop-filter: blur(6px);
    }

    .info-section {
      margin-bottom: 30px;
    }

    .info-section h2 {
      font-size: 1.4em;
      margin-bottom: 14px;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 6px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px 30px;
    }

    .info-label { font-weight: 600; }
    .info-value { opacity: 0.9; background: rgba(0,0,0,0); border: 2px solid white; border-radius: 5px ;color: white; box-shadow: none; outline: none}
    .info-value-text { opacity: 0.9; background: rgba(0,0,0,0); border: 2px solid white; border-radius: 5px ;color: white; box-shadow: none; outline: none; width: 100%;}
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    th, td {
      padding: 12px 16px;
      text-align: left;
    }

    th {
      background: rgba(255,255,255,0.25);
      text-transform: uppercase;
      font-size: 0.9em;
      letter-spacing: 0.5px;
    }

    tr:nth-child(even) {
      background: rgba(255,255,255,0.08);
    }

    tr:last-child th {
      background: rgba(255,255,255,0.2);
    }

    .table-actions {
      margin-top: 8px;
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }

    .order-status {
      margin-top: 8px;
      text-align: right;
      font-weight: 600;
      opacity: 0.9;
    }

    .back-link {
      margin-top: 40px;
      text-decoration: none;
      color: #fff;
      background: rgba(255,255,255,0.2);
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      transition: background 0.3s, transform 0.2s;
    }

    .back-link:hover {
      background: rgba(255,255,255,0.4);
      transform: translateY(-2px);
    }

    footer {
      margin-top: auto;
      opacity: 0.8;
      font-size: 0.9em;
    }

    .total-summary {
      text-align: right;
      font-weight: bold;
      background: rgba(255,255,255,0.2);
      padding: 10px;
      border-radius: 8px;
      margin-top: 15px;
    }
    select>option {
    background-color: black;
    }
  </style>
</head>
<body>
  <h1>üõ†Ô∏è Maintenance Details</h1>
  <div class="subtitle">{{ vehicle.model }} ({{ vehicle.license_plate }}) Maintenance</div>
    <div class="info-section">
      {% if message %}
      <p>{{ message }}</p>
      {% endif %}
      <form method="POST" action="/maintenance_page/{{ maintenance.id }}">
          <div class="action-buttons">
            <button type="submit" name="button" value="save_description" class="btn edit">Save</button>
            <button id="deleteBtn" type="submit" name="button" value="delete" class="btn delete">Delete</button>
          </div>
        <h2>Maintenance Information</h2>
        <div class="info-grid">
          <div>
            <span class="info-label">
              <label for="id_input">Maintenance ID: </label>
            </span>
            <input type="text" class="info-value" id="id_input" value="{{ maintenance.id }}" disabled>
          </div>
          <div>
            <span class="info-label">
              <label for="status">Car Status: </label>
            </span>
            <select type="text" class="info-value" id="status" name="status" {{ disabled }}>
              <option {{ ["", "selected"][vehicle.status == "Active"] }}>Active</option>
              <option {{ ["", "selected"][vehicle.status == "Maintenance"] }}>Maintenance</option>
            </select>
          </div>
          <div>
            <span class="info-label">
              <label for="start_date_input">Start Date: </label>
            </span>
            <input type="date" class="info-value" id="start_date_input" value="{{ maintenance.start_date }}" name="start_date">
          </div>
          <div>
            <span class="info-label">
              <label for="end_date_input">End Date: </label>
            </span>
            <input type="date" class="info-value" id="end_date_input" value="{{ maintenance.end_date }}" name="end_date">
          </div>
        </div>
        <h2>Reported Problem</h2>
        {% if maintenance.reported_problem %}
        <textarea name="problem" class= "info-value-text" oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'">{{ maintenance.reported_problem }}</textarea>
        {% else %}
        <textarea name="problem" class="info-value-text" oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'">Empty</textarea>
        {% endif %}
        <h2>Maintenance Description</h2>
        {% if maintenance.maintenance_description %}
        <textarea name="description" class="info-value-text" oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'">{{ maintenance.maintenance_description }}</textarea>
        {% else %}
        <textarea name="description" class="info-value-text" oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'">Empty</textarea>
        {% endif %}
      </form>
    </div>

  <div class="details-container">
    <div class="info-section">
      <h2>Parts Orders</h2>

      <table>
        <thead>
          <tr>
            <th>Order ID</th><th>Component</th><th>Cost (‚Ç¨)</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>ORD-2025-045</td><td>Suspension Bushings Set</td><td>80.00</td></tr>
          <tr><th colspan="2" style="text-align:right;">Order Total:</th><th>‚Ç¨80.00</th></tr>
        </tbody>
      </table>
      <div class="order-status">üì¶ Order Status: <strong>Pending (Expected Delivery: 2025-10-18)</strong></div>
      <div class="table-actions">
        <button class="btn edit">Edit</button>
      </div>

      <div class="total-summary">Total Cost for All Orders: ‚Ç¨220.00</div>
    </div>

    <div class="info-section" id="scrollto">
      <form method="POST" action="/maintenance_page/{{ maintenance.id }}">
        <h2>Components Needing Order</h2>
        <table>
          <thead>
          <tr><th>Component ID</th><th>Component Name</th><th>Quantity</th><th></th></tr>
          </thead>
          <tbody>
          {% for component in awaiting_order_details %}
          <tr><td>{{ component.id }}</td><td><input class="info-value" name="{{ component.id }}" type="text" value="{{ component.name }}"></td><td><input class="info-value" name="{{ component.id }}" type="number" value="{{ component.quantity }}"></td><td><button class="btn edit" name="delete_component" value="{{ component.id }}">Remove</button></td></tr>
          {% endfor %}
          </tbody>
        </table>
        <div class="table-actions">
          <button class="btn edit" name="button" value="save_need">Save</button>
          <button class="btn edit" name="button" value="add_need">Add</button>
          <button class="btn edit" name="button" value="place_order">Order New Parts</button>
        </div>
      </form>
    </div>
  </div>

<script>
document.getElementById('deleteBtn').addEventListener('click', function (e) {
  if (!confirm('You are about to delete this record. Are you sure?')) {
    e.preventDefault();
  }
});
var element_to_scroll_to = document.getElementById('scrollto');
element_to_scroll_to.scrollIntoView();
</script>
</body>
</html>
