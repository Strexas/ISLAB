{% extends "fleet_management/base.html" %}

{% block title %}Retire Vehicle{% endblock %}

{% block content %}
<h1>Retire Vehicle: {{ vehicle.manufacturer }} {{ vehicle.model }}</h1>

<div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
    <div style="margin-bottom: 30px; padding: 20px; background-color: #fff3cd; border-radius: 5px;">
        <h3 style="color: #856404; margin-top: 0;">⚠️ Warning</h3>
        <p>You are about to retire this vehicle. This action will:</p>
        <ul>
            <li>Change the vehicle status to "Inactive"</li>
            <li>Remove the vehicle from available fleet listings</li>
            <li>Prevent new reservations for this vehicle</li>
        </ul>
        <p><strong>This action cannot be easily undone.</strong></p>
    </div>
    
    <div style="margin-bottom: 30px; padding: 20px; background-color: #f8f9fa; border-radius: 5px;">
        <h4>Vehicle Details</h4>
        <p><strong>Vehicle ID:</strong> {{ vehicle.vehicle_id }}</p>
        <p><strong>License Plate:</strong> {{ vehicle.license_plate }}</p>
        <p><strong>Current Status:</strong> {{ vehicle.status }}</p>
        <p><strong>Added:</strong> {{ vehicle.created_at.strftime('%Y-%m-%d') if vehicle.created_at else 'Unknown' }}</p>
    </div>
    
    <form method="POST" action="{{ url_for('fleet_management.retire_vehicle', vehicle_id=vehicle.vehicle_id) }}">
        {{ form.hidden_tag() }}
        
        <div class="form-group">
            {{ form.reason.label }}
            {{ form.reason(class="form-control", rows=4, placeholder="Enter the reason for retiring this vehicle (e.g., end of service life, accident damage, etc.)") }}
            {% if form.reason.errors %}
            <div style="color: #dc3545; font-size: 14px; margin-top: 5px;">
                {% for error in form.reason.errors %}
                {{ error }}
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <div class="form-group" style="margin-top: 20px;">
            <label style="display: flex; align-items: center; gap: 10px;">
                {{ form.confirm() }}
                <span>I understand that this action will retire the vehicle and it will no longer be available for rentals.</span>
            </label>
            {% if form.confirm.errors %}
            <div style="color: #dc3545; font-size: 14px; margin-top: 5px;">
                {% for error in form.confirm.errors %}
                {{ error }}
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-danger">Confirm Retirement</button>
            <a href="{{ url_for('fleet_management.vehicle_details', vehicle_id=vehicle.vehicle_id) }}" 
               class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}